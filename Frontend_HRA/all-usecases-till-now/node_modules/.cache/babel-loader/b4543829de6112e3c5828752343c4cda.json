{"remainingRequest":"/home/akshaya/Documents/projects/HRA-frontend-app/all-usecases-till-now/node_modules/babel-loader/lib/index.js!/home/akshaya/Documents/projects/HRA-frontend-app/all-usecases-till-now/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/akshaya/Documents/projects/HRA-frontend-app/all-usecases-till-now/src/components/userdashboard/editform/editagreement.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/akshaya/Documents/projects/HRA-frontend-app/all-usecases-till-now/src/components/userdashboard/editform/editagreement.vue","mtime":1541838775612},{"path":"/home/akshaya/Documents/projects/HRA-frontend-app/all-usecases-till-now/node_modules/cache-loader/dist/cjs.js","mtime":1541837368340},{"path":"/home/akshaya/Documents/projects/HRA-frontend-app/all-usecases-till-now/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/akshaya/Documents/projects/HRA-frontend-app/all-usecases-till-now/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { localstore } from '../../../main.js';\nimport axios from 'axios';\nimport { Validator } from 'vee-validate';\n/* eslint-disable */\n\nvar dict = {\n  en: {\n    custom: {}\n  }\n};\nexport default {\n  data: function data() {\n    return {\n      imageUpload: 0,\n      filevalid: true,\n      filevalid_format: true,\n      file_change: 0,\n      agreement: {\n        user_id: localstore.details.user_id,\n        startdate_agreement: localstore.details.startdate_agreement,\n        enddate_agreement: localstore.details.enddate_agreement,\n        rent_agreement: localstore.details.rent_agreement,\n        rent_agreement_name: localstore.details.rent_agreement_name\n      }\n    };\n  },\n  mounted: function mounted() {\n    localstore.user.user_id = JSON.stringify(localStorage.getItem('user_id'));\n    localstore.user.token = JSON.stringify(localStorage.getItem('token'));\n    localstore.user.name = JSON.stringify(localStorage.getItem('name'));\n    localstore.user.email = JSON.stringify(localStorage.getItem('email'));\n    localstore.user.mobile = JSON.stringify(localStorage.getItem('mobile'));\n    localstore.details.user_id = JSON.stringify(localStorage.getItem('user_id'));\n    localstore.details.token = JSON.stringify(localStorage.getItem('token'));\n  },\n  methods: {\n    onFileChange: function onFileChange(e) {\n      this.file_change = 1;\n      this.imageUpload = 1;\n      var files = e.target.files || e.dataTransfer.files;\n      if (!files.length) return;\n      if (files[0].size > 500 * 1024) this.filevalid = false;else this.filevalid = true;\n      if (files[0].type != \"application/pdf\" && files[0].type != \"image/png\" && files[0].type != \"image/jpeg\") this.filevalid_format = false;else this.filevalid_format = true;\n      this.createImage(files[0]);\n      this.agreement.rent_agreement_name = files[0];\n    },\n    createImage: function createImage(file) {\n      var _this = this;\n\n      var reader = new FileReader();\n\n      reader.onload = function (e) {\n        _this.agreement.rent_agreement = e.target.result;\n      };\n\n      reader.readAsDataURL(file);\n    },\n    sendDatas: function sendDatas() {\n      var x = this.$el.querySelector('#form3');\n      var valid = true,\n          y = [],\n          i = 0;\n      var self = this;\n      this.$validator.validate('startdate agreement', this.agreement.startdate_agreement);\n      this.$validator.validate('enddate agreement', this.agreement.enddate_agreement);\n      y = x.querySelectorAll('.step_3');\n\n      for (i = 0; i < y.length; i++) {\n        console.log(\"in\");\n\n        if (y[i].value == \"\" || y[i].classList.contains('invalid')) {\n          valid = false;\n        }\n      }\n\n      console.log(valid);\n\n      if (!valid) {\n        alert(\"Correct the errors\");\n        return false;\n      } else {\n        localstore.details.startdate_agreement = this.agreement.startdate_agreement, localstore.details.enddate_agreement = this.agreement.enddate_agreement, localstore.details.rent_agreement = this.agreement.rent_agreement, localstore.details.rent_agreement_name = this.agreement.rent_agreement_name, console.log(localstore);\n\n        if (!this.file_change) {\n          this.property.pan_doc = '';\n          localstore.details.pan_doc = '';\n        }\n\n        axios.put('http://127.0.0.1:8000/api/updatedocuments/' + localstore.details.landlord_id + '/' + localstore.details.property_id, this.agreement).then(function (response) {\n          alert(response);\n          if (response.data.status == \"SUCCESS\") self.$router.push('/propertydetails');\n        }).catch(function (error) {\n          return alert(error);\n        });\n      }\n    }\n  }\n};",{"version":3,"sources":["editagreement.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n<div id=\"form3\">\n    <div class=\"mar0_15\">\n    <span class=\"fonweigh700\" style=\"float:right;\"><a><i class=\"fas fa-times\"></i></a></span>\n    <h4 class=\"fonweigh700\">Edit Agreement Details</h4>\n    <hr style=\"border-color:#EEEEEE;\">\n  </div>\n<div class=\"mainfomlayout\">\n    <div class=\"row\" style=\"margin-top:10px;font-family: 'Roboto', sans-serif;\">\n        <form @submit.prevent=\"sendDatas\">\n        <div class=\"hrafom3\">\n        <h4 style=\"margin: 0px 15px 20px;\">Share your rent agreement with us</h4>\n        <div class=\"row marzero0\">\n            <div class=\"col-sm-12\">\n                <div class=\"form-group custrespformgrop\">\n                        <label class=\"lblcustm\" >Start date of an agreement</label>\n                        <p>\n                          <input data-vv-validate-on=\"blur\" name=\"startdate agreement\" type=\"date\" v-model.trim=\"agreement.startdate_agreement\" v-validate=\"'required|date_format:DD/MM/YYYY'\" class=\"form-control step_3\" ref=\"startdate\" :class=\"{'invalid': errors.has('startdate agreement')}\">\n                          <span class=\"errormsg\" v-show=\"errors.has('startdate agreement')\">{{ errors.first('startdate agreement') }}</span>\n                        </p>\n                </div>\n            </div>\n        </div>\n        <div class=\"row marzero0\">\n            <div class=\"col-sm-12\">\n                <div class=\"form-group custrespformgrop\">\n                        <label class=\"lblcustm\" >End date of an agreement</label>\n                        <p>\n                          <input data-vv-validate-on=\"blur\" name=\"enddate agreement\" type=\"date\" v-model.trim=\"agreement.enddate_agreement\" v-validate=\"'required|date_format:DD/MM/YYYY|after:startdate'\" class=\"form-control step_3\" :class=\"{'invalid': errors.has('enddate agreement')}\">\n                          <span class=\"errormsg\" v-show=\"errors.has('enddate agreement')\">{{ errors.first('enddate agreement') }}</span>\n                        </p>\n                </div>\n            </div>\n        </div>\n        <div class=\"row marzero0\">\n            <div class=\"col-sm-12\">\n                <div class=\"form-group custrespformgrop\">\n                        <label class=\"lblcustm\" >Upload rent agreement</label>\n                        <div class=\"file-drop-area\">\n                            <!-- <span class=\"fake-btn\">Choose files</span> -->\n                            <span class=\"file-msg js-set-number\" style=\"color:#808080;font-size:16px\">Click or Drop files <span style=\"color:#0071bc;\">here</span></span>\n                            <input class=\"file-input\" type=\"file\" v-on:change=\"onFileChange\" multiple required>\n                        </div>\n                        <div v-show=\"imageUpload===1\"> <small><p>File Uploaded </p></small> </div>\n                        <div class=\"errormsg\" v-show=\"filevalid==false\"><b>File uploaded has exceeded size limit </b></div>\n                        <div class=\"errormsg\" v-show=\"filevalid_format==false\"><b>File uploaded is not of the format jpg/png/pdf/jpeg</b></div>\n                        <small>jpg/png/pdf files with a size less than 500kb</small>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"row marzero0\" style=\"margin-bottom:20px;\">\n            <div class=\"maxbtnwid\">\n            <div class=\"col-xs-6\"><button type=\"submit\" class=\"btn btn-info custbtnn\">Update</button></div>\n            <router-link class=\"link\" :to=\"{ name: 'propertydetails' }\"><div class=\"col-xs-6\"><button type=\"button\" class=\"btn btn-info custbtnn2\">Cancel</button></div></router-link>\n            </div>\n        </div>\n    </div>\n</form>\n    </div>\n     <hr style=\"border-color:#EEEEEE;\">\n    <p style=\"font-size:12px;color:#B0BEC5;text-align:center;\">© Copyright 2015-2018 Paymatrix. All Rights Reserved.</p>\n</div>\n</div>\n</div>\n</template>\n\n<script>\nimport {localstore} from '../../../main.js'\nimport axios from 'axios'\nimport {Validator} from 'vee-validate'\n\n/* eslint-disable */\n\n  const dict = {\n    en: {\n      custom: {\n}\n}\n};\n\nexport default {\n    data(){\n      return {\n        imageUpload:0,\n        filevalid:true ,\n        filevalid_format: true,\n        file_change:0,\n        agreement:{\n          user_id:localstore.details.user_id,\n          startdate_agreement : localstore.details.startdate_agreement,\n          enddate_agreement : localstore.details.enddate_agreement,\n          rent_agreement : localstore.details.rent_agreement,\n          rent_agreement_name : localstore.details.rent_agreement_name\n        }\n     };\n    },\n    mounted(){\n    localstore.user.user_id = JSON.stringify(localStorage.getItem('user_id'));\n    localstore.user.token = JSON.stringify(localStorage.getItem('token'));\n    localstore.user.name = JSON.stringify(localStorage.getItem('name'));\n    localstore.user.email = JSON.stringify(localStorage.getItem('email'));\n    localstore.user.mobile = JSON.stringify(localStorage.getItem('mobile'));\n    localstore.details.user_id = JSON.stringify(localStorage.getItem('user_id'));\n    localstore.details.token = JSON.stringify(localStorage.getItem('token'));\n    },\n    methods:{\n    onFileChange(e) {\n          this.file_change=1;\n          this.imageUpload=1;\n          let files = e.target.files || e.dataTransfer.files;\n            if (!files.length)\n                  return;\n            if(files[0].size > 500 * 1024)\n              this.filevalid=false;\n            else\n              this.filevalid=true;\n            if(files[0].type!=\"application/pdf\" && files[0].type!=\"image/png\" && files[0].type!=\"image/jpeg\")\n              this.filevalid_format=false;\n            else\n              this.filevalid_format=true;\n            this.createImage(files[0]);\n            this.agreement.rent_agreement_name=files[0];\n        },\n        createImage(file) {\n          let reader = new FileReader();\n          reader.onload = (e) => {\n              this.agreement.rent_agreement = e.target.result;\n          };\n          reader.readAsDataURL(file);\n        },\n        sendDatas() {\n          var x = this.$el.querySelector('#form3');\n          var valid = true, y=[], i=0;\n          let self = this;\n\n          this.$validator.validate('startdate agreement', this.agreement.startdate_agreement);\n          this.$validator.validate('enddate agreement', this.agreement.enddate_agreement);\n\n          y = x.querySelectorAll('.step_3');\n\n          for(i=0; i<y.length;i++){\n            console.log(\"in\")\n          if(y[i].value == \"\" || y[i].classList.contains('invalid')){\n\n           valid = false;\n          }\n          }\n          console.log(valid)\n          if(!valid){\n             alert(\"Correct the errors\");\n          return false;\n          }else{\n            localstore.details.startdate_agreement=this.agreement.startdate_agreement,\n            localstore.details.enddate_agreement=this.agreement.enddate_agreement,\n            localstore.details.rent_agreement=this.agreement.rent_agreement,\n            localstore.details.rent_agreement_name=this.agreement.rent_agreement_name,\n            console.log(localstore);\n            if(!this.file_change)\n            {\n              this.property.pan_doc='';\n              localstore.details.pan_doc=''\n            }\n            axios.put('http://127.0.0.1:8000/api/updatedocuments/'+localstore.details.landlord_id+'/'+localstore.details.property_id,this.agreement)\n                .then((response) => {\n                  alert(response);\n                  if(response.data.status==\"SUCCESS\")\n                   self.$router.push('/propertydetails');\n                })\n                .catch((error) => alert(error))\n          }\n     },\n    }\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style>\ninput.invalid{\n  border: 1px solid red !important;\n}\n.errormsg {\n  color: red\n}\n</style>\n"],"sourceRoot":"src/components/userdashboard/editform"}]}